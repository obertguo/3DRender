(()=>{"use strict";var t={861:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});const a=(t,e)=>{let a=0;for(let r=0;r<t.length;++r)a+=t[r]*e[r];return a},r=(t,e)=>t.map((t=>a(t,e))),n=t=>t[0][0]*t[1][1]-t[0][1]*t[1][0],s=(t,e)=>{let a=new Array(t);for(let r=0;r<t;++r)a[r]=e;return a};e.default={vecdot:a,veccross:(t,e)=>[t[1]*e[2]-e[1]*t[2],t[2]*e[0]-e[2]*t[0],t[0]*e[1]-e[0]*t[1]],matvec:r,matmul:(t,e)=>e.map((e=>r(t,e))),matdet:n,matinv:t=>{const e=n(t);return 0!==e&&[[t[1][1]/e,-t[0][1]/e],[-t[1][0]/e,t[0][0]/e]]},vecadd:(t,e)=>{let a=[];for(let r=0;r<t.length;++r)a.push(t[r]+e[r]);return a},vecsubtract:(t,e)=>{let a=[];for(let r=0;r<t.length;++r)a.push(t[r]-e[r]);return a},makevec:s,makemat:(t,e,a)=>{let r=new Array(t);for(let n=0;n<t;++n)r[n]=s(e,a);return r},degtorad:t=>t*(Math.PI/180),randInt:(t,e)=>Math.floor(Math.random()*(e-t+1)+t),randFloat:(t,e)=>Math.random()*(e-t+1)+t,vecnormalize:t=>{const e=Math.sqrt(t.reduce(((t,e)=>t+Math.pow(e,2)),0));return t.map((t=>t/e))}}},146:function(t,e,a){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=r(a(693)),s=r(a(364));e.default=class{constructor(t,e,a){this.vertices=t,this.faces=e,this.objcolor=a,this.xy_rotateDeg=0,this.xz_rotateDeg=0,this.yz_rotateDeg=0,this.scalefactor=1}getFaces(){return this.faces}getVertices(){return this.vertices}getColor(){return this.objcolor}rotateXY(t){this.vertices=n.default.rotateXY(t-this.xy_rotateDeg,this.vertices),this.xy_rotateDeg=t}rotateXZ(t){this.vertices=n.default.rotateXZ(t-this.xz_rotateDeg,this.vertices),this.xz_rotateDeg=t}rotateYZ(t){this.vertices=n.default.rotateYZ(t-this.yz_rotateDeg,this.vertices),this.yz_rotateDeg=t}translateX(t){this.vertices=n.default.translateX(t,this.vertices)}translateY(t){this.vertices=n.default.translateY(t,this.vertices)}translateZ(t){this.vertices=n.default.translateZ(t,this.vertices)}scale(t){this.vertices=n.default.scale(t/this.scalefactor,this.vertices),this.scalefactor=t}make_pixelbuffer(t,e){const a=n.default.translateY(t/2,n.default.translateX(e/2,this.vertices));return s.default.make_pixelbuffer(t,e,this.faces,a,this.objcolor)}}},364:function(t,e,a){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=r(a(861)),s=(t,e,a,r)=>{const s=r[a[0]],o=r[a[1]],l=r[a[2]],u=n.default.vecsubtract(o,s),c=n.default.vecsubtract(l,s),i=n.default.veccross(u,c);return(n.default.vecdot(i,s)-i[0]*t-i[1]*e)/i[2]},o=(t,e,a,r)=>{let s=r[a[0]],o=r[a[1]],l=r[a[2]],u=[t,e,0];o=n.default.vecsubtract(o,s),l=n.default.vecsubtract(l,s),u=n.default.vecsubtract(u,s);const c=[[o[0],l[0]],[o[1],l[1]]],i=n.default.matinv(c);if(!1===i)return!1;const d=n.default.matvec(i,[u[0],u[1]]),f=d[0],h=d[1];return 0<=f&&f<=1&&0<=h&&h<=1&&0<=h+h&&f+h<=1},l=(t,e,a)=>{const r=e[t[0]],s=e[t[1]],o=e[t[2]],l=n.default.vecsubtract(s,r),u=n.default.vecsubtract(o,r),c=n.default.vecnormalize(n.default.veccross(l,u)),i=n.default.vecnormalize(n.default.vecsubtract(a,r));return Math.abs(n.default.vecdot(c,i))};e.default={make_pixelbuffer:(t,e,a,r,u)=>{let c=n.default.makemat(t,e,[0,0,0,255]),i=n.default.makemat(t,e,Number.MIN_SAFE_INTEGER);const d=[0,0,Number.MAX_SAFE_INTEGER];return a.forEach((a=>{const n=((t,e)=>{const a=e[t[0]],r=e[t[1]],n=e[t[2]];return[Math.min(a[0],r[0],n[0]),Math.max(a[0],r[0],n[0]),Math.min(a[1],r[1],n[1]),Math.max(a[1],r[1],n[1])].map((t=>Math.round(t)))})(a,r);for(let f=Math.max(0,n[2]);f<=Math.min(t-1,n[3]);++f)for(let t=Math.max(0,n[0]);t<=Math.min(e-1,n[1]);++t)if(o(t,f,a,r)){const e=s(t,f,a,r);if(e>=i[f][t]){i[f][t]=e;const n=l(a,r,d);c[f][t]=u.map((t=>t*n))}}})),c}}},761:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(t,e,a){a.canvas.height=t,a.canvas.width=e,this.ctx=a}render(t){const e=t.length,a=t[0].length,r=t.flat(2),n=this.ctx.createImageData(a,e);for(let t=0;t<n.data.length;t+=4)n.data[t+0]=r[t+0],n.data[t+1]=r[t+1],n.data[t+2]=r[t+2],n.data[t+3]=255;this.ctx.putImageData(n,0,0)}getWidth(){return this.ctx.canvas.width}getHeight(){return this.ctx.canvas.height}}},550:function(t,e,a){var r=this&&this.__awaiter||function(t,e,a,r){return new(a||(a=Promise))((function(n,s){function o(t){try{u(r.next(t))}catch(t){s(t)}}function l(t){try{u(r.throw(t))}catch(t){s(t)}}function u(t){var e;t.done?n(t.value):(e=t.value,e instanceof a?e:new a((function(t){t(e)}))).then(o,l)}u((r=r.apply(t,e||[])).next())}))},n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=n(a(761)),o=n(a(861)),l=n(a(146)),u=document.getElementById("objUpload"),c=document.getElementById("canvas").getContext("2d"),i=document.getElementById("scale-slider"),d=document.getElementById("scale-out"),f=document.getElementById("xy-slider"),h=document.getElementById("xy-out"),v=document.getElementById("xz-slider"),m=document.getElementById("xz-out"),p=document.getElementById("yz-slider"),g=document.getElementById("yz-out");let _=new l.default([],[],[0,0,0,0]),M=new s.default(500,1e3,c);document.addEventListener("DOMContentLoaded",(t=>r(void 0,void 0,void 0,(function*(){yield b("./cube.obj")}))));const b=t=>r(void 0,void 0,void 0,(function*(){const e=yield fetch(t).then((t=>t.text())),a=new DataTransfer,r=new File([e],t);a.items.add(r),u.files=a.files,u.dispatchEvent(new Event("change"))})),y=(t,e)=>{switch(t){case 0:_.scale(e),d.innerHTML=`Scale: ${e}`,i.value=e.toString();break;case 1:_.rotateXY(e),h.innerHTML=`XY Rotation: ${e} degrees`,f.value=e.toString();break;case 2:_.rotateXZ(e),m.innerHTML=`XZ Rotation: ${e} degrees`,v.value=e.toString();break;case 3:_.rotateYZ(e),g.innerHTML=`YZ Rotation: ${e} degrees`,v.value=e.toString()}M.render(_.make_pixelbuffer(500,1e3))};u.addEventListener("change",(()=>r(void 0,void 0,void 0,(function*(){if(!u.files)return;const t=u.files[0],e=yield t.text(),a=e.split("\n").filter((t=>t.startsWith("v ")));let r=[];a.forEach((t=>{const e=t.split(/\s+/).slice(1).filter((t=>""!=t)).map((t=>parseFloat(t)));r.push(e)}));const n=e.split("\n").filter((t=>t.startsWith("f ")));let s=[];n.forEach((t=>{const e=t.split(/\s+/).slice(1).filter((t=>""!=t)).map((t=>parseInt(t)-1));for(let t=1;t<e.length-1;++t)s.push([e[0],e[t],e[t+1]])}));const c=[o.default.randInt(20,200),o.default.randInt(20,200),o.default.randInt(20,200),255];_=new l.default(r,s,c),y(0,Number.parseFloat(i.value)),y(1,Number.parseFloat(f.value)),y(2,Number.parseFloat(v.value)),y(3,Number.parseFloat(p.value))})))),i.oninput=()=>y(0,Number.parseFloat(i.value)),f.oninput=()=>y(1,Number.parseFloat(f.value)),v.oninput=()=>y(2,Number.parseFloat(v.value)),p.oninput=()=>y(3,Number.parseFloat(p.value))},693:function(t,e,a){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=r(a(861));e.default={rotateXY:(t,e)=>{const a=n.default.degtorad(t),r=[[Math.cos(a),-Math.sin(a),0],[Math.sin(a),Math.cos(a),0],[0,0,1]];return n.default.matmul(r,e)},rotateXZ:(t,e)=>{const a=n.default.degtorad(t),r=[[Math.cos(a),0,-Math.sin(a)],[0,1,0],[Math.sin(a),0,Math.cos(a)]];return n.default.matmul(r,e)},rotateYZ:(t,e)=>{const a=n.default.degtorad(t),r=[[1,0,0],[0,Math.cos(a),-Math.sin(a)],[0,Math.sin(a),Math.cos(a)]];return n.default.matmul(r,e)},translateX:(t,e)=>e.map((e=>n.default.vecadd(e,[t,0,0]))),translateY:(t,e)=>e.map((e=>n.default.vecadd(e,[0,t,0]))),translateZ:(t,e)=>e.map((e=>n.default.vecadd(e,[0,0,t]))),scale:(t,e)=>{const a=[[t,0,0],[0,t,0],[0,0,t]];return n.default.matmul(a,e)}}}},e={};!function a(r){var n=e[r];if(void 0!==n)return n.exports;var s=e[r]={exports:{}};return t[r].call(s.exports,s,s.exports,a),s.exports}(550)})();